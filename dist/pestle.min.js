!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.pestle=e()}}(function(){var e;return function t(e,n,i){function o(s,a){if(!n[s]){if(!e[s]){var c="function"==typeof require&&require;if(!a&&c)return c(s,!0);if(r)return r(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var u=n[s]={exports:{}};e[s][0].call(u.exports,function(t){var n=e[s][1][t];return o(n?n:t)},u,u.exports,t,e,n,i)}return n[s].exports}for(var r="function"==typeof require&&require,s=0;s<i.length;s++)o(i[s]);return o}({"./src/core.coffee":[function(e,t,n){!function(e,n){return t.exports=e.Pestle=n(e,{})}(window,function(t,n){var i,o;return i=e("./base.coffee"),o=e("./util/extmanager.coffee"),n=new i.Events,n.Module=e("./util/module.coffee"),n.modules={},n.Core=function(){function t(t){var n,r,s;null==t&&(t={}),this.setConfig(t),this.started=!1,this.extManager=new o,this.sandbox=i.util.clone(i),this.sandboxes={},n=e("./extension/components.coffee"),r=e("./extension/responsivedesign.coffee"),s=e("./extension/responsiveimages.coffee"),this.extManager.add(n),this.extManager.add(r),this.extManager.add(s)}return t.prototype.version="0.0.1",t.prototype.cfg={debug:{logLevel:5},namespace:"platform",extension:{},component:{}},t.prototype.addExtension=function(e){if(this.started)throw i.log.error("The Core has already been started. You can not add new extensions at this point."),new Error("You can not add extensions when the Core has already been started.");return this.extManager.add(e)},t.prototype.setConfig=function(e){var t;if(this.started)throw i.log.error("Pestle has already been started. You can not set up configs at this point."),new Error("You can not set up configs when Pestle has already started.");if(i.util.isObject(e))return i.util.isEmpty(this.config)?this.config=i.util.defaults(e,this.cfg):this.config=i.util.defaults(e,this.config);throw t="[setConfig method] only accept an object as a parameter and you're passing: "+typeof e,i.log.error(t),new Error(t)},t.prototype.setComponentConfig=function(e,t){var n;if(this.started)throw i.log.error("Pestle has already been started. You can not add new extensions at this point."),new Error("You can not add extensions when Pestle has already started.");if(!e||!i.util.isString(e))throw n="[setComponentConfig method] 1st param should be a string, you're passing:"+typeof t,i.log.error(n),new Error(n);if(i.util.isObject(t))return i.util.isEmpty(this.config)?(this.config=this.config||{},this.config.component[e]=i.util.defaults(t,this.cfg.component[e])):this.config.component[e]=i.util.defaults(t,this.config.component[e]);throw n="[setComponentConfig method] 2nd param should be an object & you're passing:"+typeof t,i.log.error(n),new Error(n)},t.prototype.start=function(e){var t;return null==e&&(e=""),i.log.setConfig(this.config.debug),this.started&&""!==e?(i.log.info("Pestle is initializing a component"),this.sandbox.startComponents(e,this)):(i.log.info("Pestle started the initializing process"),this.started=!0,this.extManager.init(this),t=$.Callbacks("unique memory"),i.util.each(this.extManager.getInitializedExtensions(),function(n){return function(o,r){return o&&(i.util.isFunction(o.afterAppStarted)&&o.activated&&("components"===o.optionKey?o.afterAppStarted(e,n):o.afterAppStarted(n)),i.util.isFunction(o.afterAppInitialized)&&o.activated)?t.add(o.afterAppInitialized):void 0}}(this)),t.fire(this))},t.prototype.createSandbox=function(e,t){return this.sandboxes[e]=i.util.extend({},this.sandbox,{name:e})},t.prototype.getInitializedComponents=function(){return this.sandbox.getInitializedComponents()},t}(),n})},{"./base.coffee":"/home/ariel/code/pestle/src/base.coffee","./extension/components.coffee":"/home/ariel/code/pestle/src/extension/components.coffee","./extension/responsivedesign.coffee":"/home/ariel/code/pestle/src/extension/responsivedesign.coffee","./extension/responsiveimages.coffee":"/home/ariel/code/pestle/src/extension/responsiveimages.coffee","./util/extmanager.coffee":"/home/ariel/code/pestle/src/util/extmanager.coffee","./util/module.coffee":"/home/ariel/code/pestle/src/util/module.coffee"}],"/home/ariel/code/pestle/node_modules/cookies-js/dist/cookies.js":[function(t,n,i){!function(t,o){"use strict";var r=function(e){if("object"!=typeof e.document)throw new Error("Cookies.js requires a `window` with a `document` object");var t=function(e,n,i){return 1===arguments.length?t.get(e):t.set(e,n,i)};return t._document=e.document,t._cacheKeyPrefix="cookey.",t._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),t.defaults={path:"/",secure:!1},t.get=function(e){t._cachedDocumentCookie!==t._document.cookie&&t._renewCache();var n=t._cache[t._cacheKeyPrefix+e];return n===o?o:decodeURIComponent(n)},t.set=function(e,n,i){return i=t._getExtendedOptions(i),i.expires=t._getExpiresDate(n===o?-1:i.expires),t._document.cookie=t._generateCookieString(e,n,i),t},t.expire=function(e,n){return t.set(e,o,n)},t._getExtendedOptions=function(e){return{path:e&&e.path||t.defaults.path,domain:e&&e.domain||t.defaults.domain,expires:e&&e.expires||t.defaults.expires,secure:e&&e.secure!==o?e.secure:t.defaults.secure}},t._isValidDate=function(e){return"[object Date]"===Object.prototype.toString.call(e)&&!isNaN(e.getTime())},t._getExpiresDate=function(e,n){if(n=n||new Date,"number"==typeof e?e=e===1/0?t._maxExpireDate:new Date(n.getTime()+1e3*e):"string"==typeof e&&(e=new Date(e)),e&&!t._isValidDate(e))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return e},t._generateCookieString=function(e,t,n){e=e.replace(/[^#$&+\^`|]/g,encodeURIComponent),e=e.replace(/\(/g,"%28").replace(/\)/g,"%29"),t=(t+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent),n=n||{};var i=e+"="+t;return i+=n.path?";path="+n.path:"",i+=n.domain?";domain="+n.domain:"",i+=n.expires?";expires="+n.expires.toUTCString():"",i+=n.secure?";secure":""},t._getCacheFromString=function(e){for(var n={},i=e?e.split("; "):[],r=0;r<i.length;r++){var s=t._getKeyValuePairFromCookieString(i[r]);n[t._cacheKeyPrefix+s.key]===o&&(n[t._cacheKeyPrefix+s.key]=s.value)}return n},t._getKeyValuePairFromCookieString=function(e){var t=e.indexOf("=");t=0>t?e.length:t;var n,i=e.substr(0,t);try{n=decodeURIComponent(i)}catch(o){console&&"function"==typeof console.error&&console.error('Could not decode cookie with key "'+i+'"',o)}return{key:n,value:e.substr(t+1)}},t._renewCache=function(){t._cache=t._getCacheFromString(t._document.cookie),t._cachedDocumentCookie=t._document.cookie},t._areEnabled=function(){var e="cookies.js",n="1"===t.set(e,1).get(e);return t.expire(e),n},t.enabled=t._areEnabled(),t},s="object"==typeof t.document?r(t):r;"function"==typeof e&&e.amd?e(function(){return s}):"object"==typeof i?("object"==typeof n&&"object"==typeof n.exports&&(i=n.exports=s),i.Cookies=s):t.Cookies=s}("undefined"==typeof window?this:window)},{}],"/home/ariel/code/pestle/node_modules/imager.js/Imager.js":[function(t,n,i){!function(t,o){"use strict";function r(e,t){for(var n=0,i=e.length,o=[];i>n;n++)o[n]=t(e[n],n);return o}function s(e){return e}function a(e,t){var n=this,i=o;t=t||{},void 0!==e&&("string"==typeof e?(t.selector=e,e=void 0):"undefined"==typeof e.length&&(t=e,e=void 0)),this.imagesOffScreen=[],this.viewportHeight=i.documentElement.clientHeight,this.selector=t.selector||".delayed-image-load",this.className=t.className||"image-replace",this.gif=i.createElement("img"),this.gif.src="data:image/gif;base64,R0lGODlhEAAJAIAAAP///wAAACH5BAEAAAAALAAAAAAQAAkAAAIKhI+py+0Po5yUFQA7",this.gif.className=this.className,this.gif.alt="",this.scrollDelay=t.scrollDelay||250,this.onResize=t.hasOwnProperty("onResize")?t.onResize:!0,this.lazyload=t.hasOwnProperty("lazyload")?t.lazyload:!1,this.scrolled=!1,this.availablePixelRatios=t.availablePixelRatios||[1,2],this.availableWidths=t.availableWidths||c,this.onImagesReplaced=t.onImagesReplaced||function(){},this.widthsMap={},this.refreshPixelRatio(),this.widthInterpolator=t.widthInterpolator||s,this.deltaSquare=t.deltaSquare||1.5,this.squareSelector=t.squareSelector||"sqrcrop",this.adaptSelector=this.adaptSelector||"adapt",this.allowedExtensions=["jpg","bmp","png","jpeg"],this.gif.removeAttribute("height"),this.gif.removeAttribute("width"),"function"!=typeof this.availableWidths&&("number"==typeof this.availableWidths.length?this.widthsMap=a.createWidthsMap(this.availableWidths,this.widthInterpolator):(this.widthsMap=this.availableWidths,this.availableWidths=l(this.availableWidths)),this.availableWidths=this.availableWidths.sort(function(e,t){return e-t})),e?(this.divs=r(e,s),this.selector=null):this.divs=r(i.querySelectorAll(this.selector),s),this.changeDivsToEmptyImages(),u(function(){n.init()})}var c,l,u,f,d;u=t.requestAnimationFrame||t.mozRequestAnimationFrame||t.webkitRequestAnimationFrame||function(e){t.setTimeout(e,1e3/60)},d=function(){return Object.prototype.hasOwnProperty.call(o.createElement("img"),"naturalWidth")?function(e){return e.naturalWidth}:function(e){var t=o.createElement("img");return t.src=e.src,t.width}}(),f=function(){return o.addEventListener?function(e,t,n){return e.addEventListener(t,n,!1)}:function(e,t,n){return e.attachEvent("on"+t,n)}}(),c=[96,130,165,200,235,270,304,340,375,410,445,485,520,555,590,625,660,695,736],l="function"==typeof Object.keys?Object.keys:function(e){var t,n=[];for(t in e)n.push(t);return n},a.prototype.scrollCheck=function(){this.scrolled&&(this.imagesOffScreen.length||t.clearInterval(this.interval),this.divs=this.imagesOffScreen.slice(0),this.imagesOffScreen.length=0,this.changeDivsToEmptyImages(),this.scrolled=!1)},a.prototype.init=function(){this.initialized=!0,this.checkImagesNeedReplacing(this.divs),this.onResize&&this.registerResizeEvent(),this.lazyload&&this.registerScrollEvent()},a.prototype.createGif=function(e){if(e.className.match(new RegExp("(^| )"+this.className+"( |$)")))return e;var t=e.getAttribute("data-class"),n=e.getAttribute("data-width"),i=this.gif.cloneNode(!1);n&&(i.width=n,i.setAttribute("data-width",n)),i.className=(t?t+" ":"")+this.className,i.setAttribute("data-src",e.getAttribute("data-src")),i.setAttribute("alt",e.getAttribute("data-alt")||this.gif.alt),i.setAttribute("itemprop",e.getAttribute("data-itemprop")||"contentUrl");var o=e.getAttribute("data-title");return o&&i.setAttribute("title",o),e.parentNode.replaceChild(i,e),i},a.prototype.changeDivsToEmptyImages=function(){var e=this;r(this.divs,function(t,n){e.lazyload?e.isThisElementOnScreen(t)?e.divs[n]=e.createGif(t):e.imagesOffScreen.push(t):e.divs[n]=e.createGif(t)}),this.initialized&&this.checkImagesNeedReplacing(this.divs)},a.prototype.isThisElementOnScreen=function(e){var t=a.getPageOffset(),n=0;if(e.offsetParent)do n+=e.offsetTop;while(e=e.offsetParent);return n<this.viewportHeight+t?!0:!1},a.prototype.checkImagesNeedReplacing=function(e){var t=this;this.isResizing||(this.isResizing=!0,this.refreshPixelRatio(),r(e,function(e){t.replaceImagesBasedOnScreenDimensions(e)}),this.isResizing=!1,this.onImagesReplaced(e))},a.prototype.replaceImagesBasedOnScreenDimensions=function(e){var t,n,i;i=d(e),t="function"==typeof this.availableWidths?this.availableWidths(e):this.determineAppropriateResolution(e),e.width=t,e.src!==this.gif.src&&i>=t||(n=this.isExtensionAllowed(e)?this.changeImageSrcToUseNewImageDimensions(this.buildUrlStructure(e.getAttribute("data-src"),e),t):this.removeModifiersfromImageSrc(e.getAttribute("data-src")),e.src=n)},a.prototype.removeModifiersfromImageSrc=function(e){var t=new RegExp("\\/{width}\\/{pixel_ratio}","g");return e.replace(t,"")},a.prototype.isExtensionAllowed=function(e){var t=this.getImageExtension(e);return t?this.allowedExtensions.indexOf(t.toLowerCase())>-1:!1},a.prototype.getImageExtension=function(e){var t=new RegExp("\\/.*\\.(.*)\\/{width}\\/{pixel_ratio}?","gi"),n=t.exec(e.getAttribute("data-src"));return n?n[1]:""},a.prototype.determineAppropriateResolution=function(e){return a.getClosestValue(e.getAttribute("data-width")||e.parentNode.clientWidth,this.availableWidths)},a.prototype.refreshPixelRatio=function(){this.devicePixelRatio=a.getClosestValue(a.getPixelRatio(),this.availablePixelRatios)},a.prototype.changeImageSrcToUseNewImageDimensions=function(e,t){return e.replace(/{width}/g,a.transforms.width(t,this.widthsMap)).replace(/{pixel_ratio}/g,a.transforms.pixelRatio(this.devicePixelRatio))},a.prototype.buildUrlStructure=function(e,t){var n=this.isImageContainerSquare(t)?"."+this.squareSelector:"",i=new RegExp("\\.("+this.allowedExtensions.join("|")+")\\/({width})\\/({pixel_ratio})?","gi");return e.replace(i,"."+this.adaptSelector+".$2.$3"+n+".$1")},a.prototype.isImageContainerSquare=function(e){return e.parentNode.clientWidth/e.parentNode.clientHeight<=this.deltaSquare},a.getPixelRatio=function(e){return(e||t).devicePixelRatio||1},a.createWidthsMap=function(e,t){for(var n={},i=e.length;i--;)n[e[i]]=t(e[i]);return n},a.transforms={pixelRatio:function(e){return e},width:function(e,t){return t[e]||e}},a.getClosestValue=function(e,t){var n=t.length,i=t[n-1];for(e=parseFloat(e,10);n--;)e<=t[n]&&(i=t[n]);return i},a.prototype.registerResizeEvent=function(){var e=this;f(t,"resize",function(){e.checkImagesNeedReplacing(e.divs)})},a.prototype.registerScrollEvent=function(){var e=this;this.scrolled=!1,this.interval=t.setInterval(function(){e.scrollCheck()},e.scrollDelay),f(t,"scroll",function(){e.scrolled=!0})},a.getPageOffsetGenerator=function(e){return e?function(){return t.pageYOffset}:function(){return o.documentElement.scrollTop}},a.getPageOffset=a.getPageOffsetGenerator(Object.prototype.hasOwnProperty.call(t,"pageYOffset")),a.applyEach=r,"object"==typeof n&&"object"==typeof n.exports?n.exports=i=a:"function"==typeof e&&e.amd?e(function(){return a}):"object"==typeof t&&(t.Imager=a)}(window,document)},{}],"/home/ariel/code/pestle/node_modules/ismobilejs/isMobile.js":[function(t,n,i){!function(t){var i=/iPhone/i,o=/iPod/i,r=/iPad/i,s=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,a=/Android/i,c=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,l=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,u=/IEMobile/i,f=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,d=/BlackBerry/i,p=/BB10/i,h=/Opera Mini/i,g=/(CriOS|Chrome)(?=.*\bMobile\b)/i,m=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,v=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),x=function(e,t){return e.test(t)},y=function(e){var t=e||navigator.userAgent,n=t.split("[FBAN");return"undefined"!=typeof n[1]&&(t=n[0]),this.apple={phone:x(i,t),ipod:x(o,t),tablet:!x(i,t)&&x(r,t),device:x(i,t)||x(o,t)||x(r,t)},this.amazon={phone:x(c,t),tablet:!x(c,t)&&x(l,t),device:x(c,t)||x(l,t)},this.android={phone:x(c,t)||x(s,t),tablet:!x(c,t)&&!x(s,t)&&(x(l,t)||x(a,t)),device:x(c,t)||x(l,t)||x(s,t)||x(a,t)},this.windows={phone:x(u,t),tablet:x(f,t),device:x(u,t)||x(f,t)},this.other={blackberry:x(d,t),blackberry10:x(p,t),opera:x(h,t),firefox:x(m,t),chrome:x(g,t),device:x(d,t)||x(p,t)||x(h,t)||x(m,t)||x(g,t)},this.seven_inch=x(v,t),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},w=function(){var e=new y;return e.Class=y,e};"undefined"!=typeof n&&n.exports&&"undefined"==typeof window?n.exports=y:"undefined"!=typeof n&&n.exports&&"undefined"!=typeof window?n.exports=w():"function"==typeof e&&e.amd?e("isMobile",[],t.isMobile=w()):t.isMobile=w()}(this)},{}],"/home/ariel/code/pestle/node_modules/loglevel/lib/loglevel.js":[function(t,n,i){!function(i,o){"use strict";"object"==typeof n&&n.exports&&"function"==typeof t?n.exports=o():"function"==typeof e&&"object"==typeof e.amd?e(o):i.log=o()}(this,function(){"use strict";function e(e){return typeof console===a?!1:void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):s}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(i){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==a&&(i.call(this,t,n),this[e].apply(this,arguments))}}function i(e,t){for(var n=0;n<c.length;n++){var i=c[n];this[i]=e>n?s:this.methodFactory(i,e,t)}}function o(t,i,o){return e(t)||n.apply(this,arguments)}function r(e,t,n){function r(e){var t=(c[e]||"silent").toUpperCase();try{return void(window.localStorage[f]=t)}catch(n){}try{window.document.cookie=encodeURIComponent(f)+"="+t+";"}catch(n){}}function s(){var e;try{e=window.localStorage[f]}catch(t){}if(typeof e===a)try{var n=window.document.cookie,i=n.indexOf(encodeURIComponent(f)+"=");i&&(e=/^([^;]+)/.exec(n.slice(i))[1])}catch(t){}return void 0===u.levels[e]&&(e=void 0),e}var l,u=this,f="loglevel";e&&(f+=":"+e),u.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},u.methodFactory=n||o,u.getLevel=function(){return l},u.setLevel=function(t,n){if("string"==typeof t&&void 0!==u.levels[t.toUpperCase()]&&(t=u.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=u.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;return l=t,n!==!1&&r(t),i.call(u,t,e),typeof console===a&&t<u.levels.SILENT?"No console available for logging":void 0},u.setDefaultLevel=function(e){s()||u.setLevel(e,!1)},u.enableAll=function(e){u.setLevel(u.levels.TRACE,e)},u.disableAll=function(e){u.setLevel(u.levels.SILENT,e)};var d=s();null==d&&(d=null==t?"WARN":t),u.setLevel(d,!1)}var s=function(){},a="undefined",c=["trace","debug","info","warn","error"],l=new r,u={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=u[e];return t||(t=u[e]=new r(e,l.getLevel(),l.methodFactory)),t};var f=typeof window!==a?window.log:void 0;return l.noConflict=function(){return typeof window!==a&&window.log===l&&(window.log=f),l},l})},{}],"/home/ariel/code/pestle/node_modules/raven-js/dist/raven.js":[function(t,n,i){!function(t,o){"use strict";function r(){return"undefined"==typeof document?"":document.location.href}function s(e,t){var n,i;if(H){t=t||{},e="raven"+e.substr(0,1).toUpperCase()+e.substr(1),document.createEvent?(n=document.createEvent("HTMLEvents"),n.initEvent(e,!0,!0)):(n=document.createEventObject(),n.eventType=e);for(i in t)g(t,i)&&(n[i]=t[i]);if(document.createEvent)document.dispatchEvent(n);else try{document.fireEvent("on"+n.eventType.toLowerCase(),n)}catch(o){}}}function a(e){this.name="RavenConfigError",this.message=e}function c(e){var t=oe.exec(e),n={},i=7;try{for(;i--;)n[ie[i]]=t[i]||""}catch(o){throw new a("Invalid DSN: "+e)}if(n.pass)throw new a("Do not specify your private key in the DSN!");return n}function l(e){return void 0===e}function u(e){return"function"==typeof e}function f(e){return"[object String]"===G.toString.call(e)}function d(e){return"object"==typeof e&&null!==e}function p(e){for(var t in e)return!1;return!0}function h(e){return d(e)&&"[object Error]"===G.toString.call(e)||e instanceof Error}function g(e,t){return G.hasOwnProperty.call(e,t)}function m(e,t){var n,i;if(l(e.length))for(n in e)g(e,n)&&t.call(null,n,e[n]);else if(i=e.length)for(n=0;i>n;n++)t.call(null,n,e[n])}function v(e,t){var n=[];e.stack&&e.stack.length&&m(e.stack,function(e,t){var i=x(t);i&&n.push(i)}),s("handle",{stackInfo:e,options:t}),w(e.name,e.message,e.url,e.lineno,n,t)}function x(e){if(e.url){var t,n={filename:e.url,lineno:e.line,colno:e.column,"function":e.func||"?"},i=y(e);if(i){var o=["pre_context","context_line","post_context"];for(t=3;t--;)n[o[t]]=i[t]}return n.in_app=!(Y.includePaths.test&&!Y.includePaths.test(n.filename)||/(Raven|TraceKit)\./.test(n["function"])||/raven\.(min\.)?js$/.test(n.filename)),n}}function y(e){if(e.context&&Y.fetchContext){for(var t=e.context,n=~~(t.length/2),i=t.length,o=!1;i--;)if(t[i].length>300){o=!0;break}if(o){if(l(e.column))return;return[[],t[n].substr(e.column,50),[]]}return[t.slice(0,n),t[n],t.slice(n+1)]}}function w(e,t,n,i,o,r){var s,a;Y.ignoreErrors.test&&Y.ignoreErrors.test(t)||(t+="",a=e+": "+t,o&&o.length?(n=o[0].filename||n,o.reverse(),s={frames:o}):n&&(s={frames:[{filename:n,lineno:i,in_app:!0}]}),Y.ignoreUrls.test&&Y.ignoreUrls.test(n)||(!Y.whitelistUrls.test||Y.whitelistUrls.test(n))&&S(b({exception:{values:[{type:e,value:t,stacktrace:s}]},culprit:n,message:a},r)))}function b(e,t){return t?(m(t,function(t,n){e[t]=n}),e):e}function E(e,t){return e.length<=t?e:e.substr(0,t)+"…"}function _(e){var t=Y.maxMessageLength;if(e.message=E(e.message,t),e.exception){var n=e.exception.values[0];n.value=E(n.value,t)}return e}function A(){return+new Date}function C(){if(H&&document.location&&document.location.href){var e={headers:{"User-Agent":navigator.userAgent}};return e.url=document.location.href,document.referrer&&(e.headers.Referer=document.referrer),e}}function S(e){var t={project:q,logger:Y.logger,platform:"javascript"},n=C();n&&(t.request=n),e=b(t,e),e.tags=b(b({},B.tags),e.tags),e.extra=b(b({},B.extra),e.extra),e.extra["session:duration"]=A()-ee,p(e.tags)&&delete e.tags,B.user&&(e.user=B.user),Y.release&&(e.release=Y.release),Y.serverName&&(e.server_name=Y.serverName),u(Y.dataCallback)&&(e=Y.dataCallback(e)||e),e&&!p(e)&&(!u(Y.shouldSendCallback)||Y.shouldSendCallback(e))&&(M=e.event_id||(e.event_id=I()),e=_(e),z("debug","Raven about to send:",e),j()&&(Y.transport||k)({url:U,auth:{sentry_version:"7",sentry_client:"raven-js/"+ne.VERSION,sentry_key:$},data:e,options:Y,onSuccess:function(){s("success",{data:e,src:U})},onError:function(){s("failure",{data:e,src:U})}}))}function k(e){e.auth.sentry_data=JSON.stringify(e.data);var t=R(),n=e.url+"?"+L(e.auth),i=e.options.crossOrigin;(i||""===i)&&(t.crossOrigin=i),t.onload=e.onSuccess,t.onerror=t.onabort=e.onError,t.src=n}function R(){return document.createElement("img")}function j(){return V?U?!0:(re||z("error","Error: Raven has not been configured."),re=!0,!1):!1}function O(e){for(var t,n=[],i=0,o=e.length;o>i;i++)t=e[i],f(t)?n.push(t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")):t&&t.source&&n.push(t.source);return new RegExp(n.join("|"),"i")}function I(){var e=t.crypto||t.msCrypto;if(!l(e)&&e.getRandomValues){var n=new Uint16Array(8);e.getRandomValues(n),n[3]=4095&n[3]|16384,n[4]=16383&n[4]|32768;var i=function(e){for(var t=e.toString(16);t.length<4;)t="0"+t;return t};return i(n[0])+i(n[1])+i(n[2])+i(n[3])+i(n[4])+i(n[5])+i(n[6])+i(n[7])}return"xxxxxxxxxxxx4xxxyxxxxxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0,n="x"==e?t:3&t|8;return n.toString(16)})}function z(e){Z[e]&&ne.debug&&Z[e].apply(J,F.call(arguments,1))}function P(){var e=t.RavenConfig;e&&ne.config(e.dsn,e.config).install()}function L(e){var t=[];return m(e,function(e,n){t.push(encodeURIComponent(e)+"="+encodeURIComponent(n))}),t.join("&")}function T(e,t){l(t)?delete B[e]:B[e]=b(B[e]||{},t)}var N={remoteFetching:!1,collectWindowErrors:!0,linesOfContext:7,debug:!1},F=[].slice,D="?";N.report=function(){function e(e){c(),h.push(e)}function n(e){for(var t=h.length-1;t>=0;--t)h[t]===e&&h.splice(t,1)}function i(){l(),h=[]}function s(e,t){var n=null;if(!t||N.collectWindowErrors){for(var i in h)if(g(h,i))try{h[i].apply(null,[e].concat(F.call(arguments,2)))}catch(o){n=o}if(n)throw n}}function a(e,t,n,i,o){var a=null;if(x)N.computeStackTrace.augmentStackTraceWithInitialElement(x,t,n,e),u();else if(o)a=N.computeStackTrace(o),s(a,!0);else{var c={url:t,line:n,column:i};c.func=N.computeStackTrace.guessFunctionName(c.url,c.line),c.context=N.computeStackTrace.gatherContext(c.url,c.line),a={message:e,url:r(),stack:[c]},s(a,!0)}return d?d.apply(this,arguments):!1}function c(){p||(d=t.onerror,t.onerror=a,p=!0)}function l(){p&&(t.onerror=d,p=!1,d=o)}function u(){var e=x,t=m;m=null,x=null,v=null,s.apply(null,[e,!1].concat(t))}function f(e,n){var i=F.call(arguments,1);if(x){if(v===e)return;u()}var o=N.computeStackTrace(e);if(x=o,v=e,m=i,t.setTimeout(function(){v===e&&u()},o.incomplete?2e3:0),n!==!1)throw e}var d,p,h=[],m=null,v=null,x=null;return f.subscribe=e,f.unsubscribe=n,f.uninstall=i,f}(),N.computeStackTrace=function(){function e(e){if(!N.remoteFetching)return"";try{var n=function(){try{return new t.XMLHttpRequest}catch(e){return new t.ActiveXObject("Microsoft.XMLHTTP")}},i=n();return i.open("GET",e,!1),i.send(""),i.responseText}catch(o){return""}}function n(t){if(!f(t))return[];if(!g(w,t)){var n="",i="";try{i=document.domain}catch(o){}-1!==t.indexOf(i)&&(n=e(t)),w[t]=n?n.split("\n"):[]}return w[t]}function i(e,t){var i,o=/function ([^(]*)\(([^)]*)\)/,r=/['"]?([0-9A-Za-z$_]+)['"]?\s*[:=]\s*(function|eval|new Function)/,s="",a=10,c=n(e);if(!c.length)return D;for(var u=0;a>u;++u)if(s=c[t-u]+s,!l(s)){if(i=r.exec(s))return i[1];if(i=o.exec(s))return i[1]}return D}function o(e,t){var i=n(e);if(!i.length)return null;var o=[],r=Math.floor(N.linesOfContext/2),s=r+N.linesOfContext%2,a=Math.max(0,t-r-1),c=Math.min(i.length,t+s-1);t-=1;for(var u=a;c>u;++u)l(i[u])||o.push(i[u]);return o.length>0?o:null}function s(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#]/g,"\\$&")}function a(e){return s(e).replace("<","(?:<|&lt;)").replace(">","(?:>|&gt;)").replace("&","(?:&|&amp;)").replace('"','(?:"|&quot;)').replace(/\s+/g,"\\s+")}function c(e,t){for(var i,o,r=0,s=t.length;s>r;++r)if((i=n(t[r])).length&&(i=i.join("\n"),o=e.exec(i)))return{url:t[r],line:i.substring(0,o.index).split("\n").length,column:o.index-i.lastIndexOf("\n",o.index)-1};return null}function u(e,t,i){var o,r=n(t),a=new RegExp("\\b"+s(e)+"\\b");return i-=1,r&&r.length>i&&(o=a.exec(r[i]))?o.index:null}function d(e){if("undefined"!=typeof document){for(var n,i,o,r,l=[t.location.href],u=document.getElementsByTagName("script"),f=""+e,d=/^function(?:\s+([\w$]+))?\s*\(([\w\s,]*)\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,p=/^function on([\w$]+)\s*\(event\)\s*\{\s*(\S[\s\S]*\S)\s*\}\s*$/,h=0;h<u.length;++h){var g=u[h];g.src&&l.push(g.src)}if(o=d.exec(f)){var m=o[1]?"\\s+"+o[1]:"",v=o[2].split(",").join("\\s*,\\s*");n=s(o[3]).replace(/;$/,";?"),i=new RegExp("function"+m+"\\s*\\(\\s*"+v+"\\s*\\)\\s*{\\s*"+n+"\\s*}")}else i=new RegExp(s(f).replace(/\s+/g,"\\s+"));if(r=c(i,l))return r;if(o=p.exec(f)){var x=o[1];if(n=a(o[2]),i=new RegExp("on"+x+"=[\\'\"]\\s*"+n+"\\s*[\\'\"]","i"),r=c(i,l[0]))return r;if(i=new RegExp(n),r=c(i,l))return r}return null}}function p(e){if(!l(e.stack)&&e.stack){for(var t,n,s=/^\s*at (.*?) ?\(?((?:(?:file|https?|chrome-extension):.*?)|<anonymous>):(\d+)(?::(\d+))?\)?\s*$/i,a=/^\s*(.*?)(?:\((.*?)\))?@((?:file|https?|chrome).*?):(\d+)(?::(\d+))?\s*$/i,c=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:ms-appx|http|https):.*?):(\d+)(?::(\d+))?\)?\s*$/i,f=e.stack.split("\n"),d=[],p=/^(.*) is undefined$/.exec(e.message),h=0,g=f.length;g>h;++h){if(t=a.exec(f[h]))n={url:t[3],func:t[1]||D,args:t[2]?t[2].split(","):"",line:+t[4],column:t[5]?+t[5]:null};else if(t=s.exec(f[h]))n={url:t[2],func:t[1]||D,line:+t[3],column:t[4]?+t[4]:null};else{if(!(t=c.exec(f[h])))continue;n={url:t[2],func:t[1]||D,line:+t[3],column:t[4]?+t[4]:null}}!n.func&&n.line&&(n.func=i(n.url,n.line)),n.line&&(n.context=o(n.url,n.line)),d.push(n)}return d.length?(d[0].line&&!d[0].column&&p?d[0].column=u(p[1],d[0].url,d[0].line):d[0].column||l(e.columnNumber)||(d[0].column=e.columnNumber+1),{name:e.name,message:e.message,url:r(),stack:d}):null}}function h(e){var t=e.stacktrace;if(!l(e.stacktrace)&&e.stacktrace){for(var n,s=/ line (\d+), column (\d+) in (?:<anonymous function: ([^>]+)>|([^\)]+))\((.*)\) in (.*):\s*$/i,a=t.split("\n"),c=[],u=0,f=a.length;f>u;u+=2)if(n=s.exec(a[u])){var d={line:+n[1],column:+n[2],func:n[3]||n[4],args:n[5]?n[5].split(","):[],url:n[6]};if(!d.func&&d.line&&(d.func=i(d.url,d.line)),d.line)try{d.context=o(d.url,d.line)}catch(p){}d.context||(d.context=[a[u+1]]),c.push(d)}return c.length?{name:e.name,message:e.message,url:r(),stack:c}:null}}function m(e){var s=e.message.split("\n");if(s.length<4)return null;var l,u,f,d,p=/^\s*Line (\d+) of linked script ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,h=/^\s*Line (\d+) of inline#(\d+) script in ((?:file|https?)\S+)(?:: in function (\S+))?\s*$/i,m=/^\s*Line (\d+) of function script\s*$/i,v=[],x=document.getElementsByTagName("script"),y=[];for(u in x)g(x,u)&&!x[u].src&&y.push(x[u]);for(u=2,f=s.length;f>u;u+=2){var w=null;if(l=p.exec(s[u]))w={url:l[2],func:l[3],line:+l[1]};else if(l=h.exec(s[u])){w={url:l[3],func:l[4]};var b=+l[1],E=y[l[2]-1];if(E&&(d=n(w.url))){d=d.join("\n");var _=d.indexOf(E.innerText);_>=0&&(w.line=b+d.substring(0,_).split("\n").length)}}else if(l=m.exec(s[u])){var A=t.location.href.replace(/#.*$/,""),C=l[1],S=new RegExp(a(s[u+1]));d=c(S,[A]),w={url:A,line:d?d.line:C,func:""}}if(w){w.func||(w.func=i(w.url,w.line));var k=o(w.url,w.line),R=k?k[Math.floor(k.length/2)]:null;k&&R.replace(/^\s*/,"")===s[u+1].replace(/^\s*/,"")?w.context=k:w.context=[s[u+1]],v.push(w)}}return v.length?{name:e.name,message:s[0],url:r(),stack:v}:null}function v(e,t,n,r){var s={url:t,line:n};if(s.url&&s.line){e.incomplete=!1,s.func||(s.func=i(s.url,s.line)),s.context||(s.context=o(s.url,s.line));var a=/ '([^']+)' /.exec(r);if(a&&(s.column=u(a[1],s.url,s.line)),e.stack.length>0&&e.stack[0].url===s.url){if(e.stack[0].line===s.line)return!1;if(!e.stack[0].line&&e.stack[0].func===s.func)return e.stack[0].line=s.line,e.stack[0].context=s.context,!1}return e.stack.unshift(s),e.partial=!0,!0}return e.incomplete=!0,!1}function x(e,t){for(var n,o,s,a=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,c=[],l={},f=!1,p=x.caller;p&&!f;p=p.caller)if(p!==y&&p!==N.report){if(o={url:null,func:D,line:null,column:null},p.name?o.func=p.name:(n=a.exec(p.toString()))&&(o.func=n[1]),"undefined"==typeof o.func)try{o.func=n.input.substring(0,n.input.indexOf("{"))}catch(h){}if(s=d(p)){o.url=s.url,o.line=s.line,o.func===D&&(o.func=i(o.url,o.line));var g=/ '([^']+)' /.exec(e.message||e.description);g&&(o.column=u(g[1],s.url,s.line))}l[""+p]?f=!0:l[""+p]=!0,c.push(o)}t&&c.splice(0,t);var m={name:e.name,message:e.message,url:r(),stack:c};return v(m,e.sourceURL||e.fileName,e.line||e.lineNumber,e.message||e.description),m}function y(e,t){var n=null;t=null==t?0:+t;try{if(n=h(e))return n}catch(i){if(N.debug)throw i}try{if(n=p(e))return n}catch(i){if(N.debug)throw i}try{if(n=m(e))return n}catch(i){if(N.debug)throw i}try{if(n=x(e,t+1))return n}catch(i){if(N.debug)throw i}return{name:e.name,message:e.message,url:r()}}var w={};return y.augmentStackTraceWithInitialElement=v,y.computeStackTraceFromStackProp=p,y.guessFunctionName=i,y.gatherContext=o,y}();var W,M,U,$,q,K=t.Raven,V=!("object"!=typeof JSON||!JSON.stringify),H="undefined"!=typeof document,B={},Y={logger:"javascript",ignoreErrors:[],ignoreUrls:[],whitelistUrls:[],includePaths:[],crossOrigin:"anonymous",collectWindowErrors:!0,maxMessageLength:100},X=!1,G=Object.prototype,J=t.console||{},Z={},Q=[],ee=A();for(var te in J)Z[te]=J[te];var ne={VERSION:"1.3.0",debug:!1,noConflict:function(){return t.Raven=K,ne},config:function(e,t){if(U)return z("error","Error: Raven has already been configured"),ne;if(!e)return ne;var n=c(e),i=n.path.lastIndexOf("/"),o=n.path.substr(1,i);return t&&m(t,function(e,t){"tags"==e||"extra"==e?B[e]=t:Y[e]=t}),Y.ignoreErrors.push(/^Script error\.?$/),Y.ignoreErrors.push(/^Javascript error: Script error\.? on line 0$/),Y.ignoreErrors=O(Y.ignoreErrors),Y.ignoreUrls=Y.ignoreUrls.length?O(Y.ignoreUrls):!1,Y.whitelistUrls=Y.whitelistUrls.length?O(Y.whitelistUrls):!1,Y.includePaths=O(Y.includePaths),$=n.user,q=n.path.substr(i+1),U="//"+n.host+(n.port?":"+n.port:"")+"/"+o+"api/"+q+"/store/",n.protocol&&(U=n.protocol+":"+U),Y.fetchContext&&(N.remoteFetching=!0),Y.linesOfContext&&(N.linesOfContext=Y.linesOfContext),N.collectWindowErrors=!!Y.collectWindowErrors,ne},install:function(){return j()&&!X&&(N.report.subscribe(v),m(Q,function(e,t){
t()}),X=!0),ne},context:function(e,t,n){return u(e)&&(n=t||[],t=e,e=o),ne.wrap(e,t).apply(this,n)},wrap:function(e,t){function n(){for(var n=[],i=arguments.length,o=!e||e&&e.deep!==!1;i--;)n[i]=o?ne.wrap(e,arguments[i]):arguments[i];try{return t.apply(this,n)}catch(r){throw ne.captureException(r,e),r}}if(l(t)&&!u(e))return e;if(u(e)&&(t=e,e=o),!u(t))return t;if(t.__raven__)return t;for(var i in t)g(t,i)&&(n[i]=t[i]);return n.prototype=t.prototype,n.__raven__=!0,n.__inner__=t,n},uninstall:function(){return N.report.uninstall(),X=!1,ne},captureException:function(e,t){if(!h(e))return ne.captureMessage(e,t);W=e;try{var n=N.computeStackTrace(e);v(n,t)}catch(i){if(e!==i)throw i}return ne},captureMessage:function(e,t){return Y.ignoreErrors.test&&Y.ignoreErrors.test(e)?void 0:(S(b({message:e+""},t)),ne)},addPlugin:function(e){return Q.push(e),X&&e(),ne},setUserContext:function(e){return B.user=e,ne},setExtraContext:function(e){return T("extra",e),ne},setTagsContext:function(e){return T("tags",e),ne},clearContext:function(){return B={},ne},getContext:function(){return JSON.parse(JSON.stringify(B))},setRelease:function(e){return Y.release=e,ne},setDataCallback:function(e){return Y.dataCallback=e,ne},setShouldSendCallback:function(e){return Y.shouldSendCallback=e,ne},setTransport:function(e){return Y.transport=e,ne},lastException:function(){return W},lastEventId:function(){return M},isSetup:function(){return j()}};ne.setUser=ne.setUserContext,ne.setReleaseContext=ne.setRelease;var ie="source protocol user pass host port path".split(" "),oe=/^(?:(\w+):)?\/\/(?:(\w+)(:\w+)?@)?([\w\.-]+)(?::(\d+))?(\/.*)/;a.prototype=new Error,a.prototype.constructor=a;var re;P(),t.Raven=ne,"function"==typeof e&&e.amd?e("raven",[],function(){return ne}):"object"==typeof n?n.exports=ne:"object"==typeof i&&(i=ne)}("undefined"!=typeof window?window:this)},{}],"/home/ariel/code/pestle/node_modules/verge/verge.js":[function(e,t,n){!function(e,n,i){"undefined"!=typeof t&&t.exports?t.exports=i():e[n]=i()}(this,"verge",function(){function e(){return{width:u(),height:f()}}function t(e,t){var n={};return t=+t||0,n.width=(n.right=e.right+t)-(n.left=e.left-t),n.height=(n.bottom=e.bottom+t)-(n.top=e.top-t),n}function n(e,n){return e=e&&!e.nodeType?e[0]:e,e&&1===e.nodeType?t(e.getBoundingClientRect(),n):!1}function i(t){t=null==t?e():1===t.nodeType?n(t):t;var i=t.height,o=t.width;return i="function"==typeof i?i.call(t):i,o="function"==typeof o?o.call(t):o,o/i}var o={},r="undefined"!=typeof window&&window,s="undefined"!=typeof document&&document,a=s&&s.documentElement,c=r.matchMedia||r.msMatchMedia,l=c?function(e){return!!c.call(r,e).matches}:function(){return!1},u=o.viewportW=function(){var e=a.clientWidth,t=r.innerWidth;return t>e?t:e},f=o.viewportH=function(){var e=a.clientHeight,t=r.innerHeight;return t>e?t:e};return o.mq=l,o.matchMedia=c?function(){return c.apply(r,arguments)}:function(){return{}},o.viewport=e,o.scrollX=function(){return r.pageXOffset||a.scrollLeft},o.scrollY=function(){return r.pageYOffset||a.scrollTop},o.rectangle=n,o.aspect=i,o.inX=function(e,t){var i=n(e,t);return!!i&&i.right>=0&&i.left<=u()},o.inY=function(e,t){var i=n(e,t);return!!i&&i.bottom>=0&&i.top<=f()},o.inViewport=function(e,t){var i=n(e,t);return!!i&&i.bottom>=0&&i.right>=0&&i.top<=f()&&i.left<=u()},o})},{}],"/home/ariel/code/pestle/node_modules/wolfy87-eventemitter/EventEmitter.js":[function(t,n,i){(function(){"use strict";function t(){}function i(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function o(e){return function(){return this[e].apply(this,arguments)}}var r=t.prototype,s=this,a=s.EventEmitter;r.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},r.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},r.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},r.addListener=function(e,t){var n,o=this.getListenersAsObject(e),r="object"==typeof t;for(n in o)o.hasOwnProperty(n)&&-1===i(o[n],t)&&o[n].push(r?t:{listener:t,once:!1});return this},r.on=o("addListener"),r.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},r.once=o("addOnceListener"),r.defineEvent=function(e){return this.getListeners(e),this},r.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},r.removeListener=function(e,t){var n,o,r=this.getListenersAsObject(e);for(o in r)r.hasOwnProperty(o)&&(n=i(r[o],t),-1!==n&&r[o].splice(n,1));return this},r.off=o("removeListener"),r.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},r.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},r.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,s=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?r.call(this,i,o):s.call(this,i,o));return this},r.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},r.removeAllListeners=o("removeEvent"),r.emitEvent=function(e,t){var n,i,o,r,s,a=this.getListenersAsObject(e);for(r in a)if(a.hasOwnProperty(r))for(n=a[r].slice(0),o=n.length;o--;)i=n[o],i.once===!0&&this.removeListener(e,i.listener),s=i.listener.apply(this,t||[]),s===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},r.trigger=o("emitEvent"),r.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},r.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},r._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},r._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return s.EventEmitter=a,t},"function"==typeof e&&e.amd?e(function(){return t}):"object"==typeof n&&n.exports?n.exports=t:s.EventEmitter=t}).call(this)},{}],"/home/ariel/code/pestle/src/base.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){return n.log=e("./util/logger.coffee"),n.device=e("./util/devicedetection.coffee"),n.cookies=e("./util/cookies.coffee"),n.vp=e("./util/viewportdetection.coffee"),n.Imager=e("imager.js"),n.Events=e("./util/eventbus.coffee"),n.util=e("./util/general.coffee"),n})},{"./util/cookies.coffee":"/home/ariel/code/pestle/src/util/cookies.coffee","./util/devicedetection.coffee":"/home/ariel/code/pestle/src/util/devicedetection.coffee","./util/eventbus.coffee":"/home/ariel/code/pestle/src/util/eventbus.coffee","./util/general.coffee":"/home/ariel/code/pestle/src/util/general.coffee","./util/logger.coffee":"/home/ariel/code/pestle/src/util/logger.coffee","./util/viewportdetection.coffee":"/home/ariel/code/pestle/src/util/viewportdetection.coffee","imager.js":"/home/ariel/code/pestle/node_modules/imager.js/Imager.js"}],"/home/ariel/code/pestle/src/extension/components.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i,o,r,s;return o=e("./../base.coffee"),s=e("./../util/module.coffee"),i=e("jquery"),r=function(){function e(){}return e.initializedComponents={},e.startAll=function(t,n,i){var r,a;return null==t&&(t="body"),null==i&&(i=Pestle.modules),a=e.parse(t,n.config.namespace),r=o.util.clone(a),o.log.info("Parsed components"),o.log.debug(r),o.util.isEmpty(a)||o.util.each(i,function(e,t){return o.util.isFunction(e)?void 0:s.extend(t,e)}),o.util.extend(i,Pestle.Module.list),e.instantiate(a,n),{all:e.initializedComponents,"new":r}},e.parse=function(t,n){var r,s,a;return s=[],o.util.isArray(n)?a=n:o.util.isString(n)&&(a=n.split(",")),r=[],o.util.each(a,function(e,t){return r.push("[data-"+e+"-component]")}),i(t).find(r.join(",")).each(function(t,r){var c,l;return i(r).data("pestle-guid")?void 0:(c=function(){return n="",o.util.each(a,function(e,t){return i(r).data(e+"-component")?n=e:void 0}),n}(),l=e.parseComponentOptions(this,c),s.push({name:l.name,options:l}))}),s},e.parseComponentOptions=function(t,n,r){var s,a,c,l;return l=o.util.clone(r||{}),l.el=t,s=i(t).data(),c="",a=0,o.util.each(s,function(e,t){return t=t.replace(new RegExp("^"+n),""),t=t.charAt(0).toLowerCase()+t.slice(1),"component"!==t?(l[t]=e,a++):c=e}),l.length=a+1,e.buildOptionsObject(c,l)},e.buildOptionsObject=function(e,t){return t.name=e,t},e.instantiate=function(t,n){var r,s,a,c,l;return t.length>0?(r=t.shift(),!o.util.isEmpty(Pestle.modules)&&Pestle.modules[r.name]&&r.options&&(s=Pestle.modules[r.name],l=n.createSandbox(r.name),c=r.name+"_",r.options.guid=c+(o.util.keys(e.initializedComponents).filter(function(e){return o.util.includes(e,c)}).length+1),r.options.__defaults__=n.config.component[r.name],a=new s({sandbox:l,options:r.options}),a.initialize(),i(r.options.el).data("pestle-guid",r.options.guid),e.initializedComponents[r.options.guid]=a),e.instantiate(t,n)):void 0},e}(),{initialize:function(e){var t;return o.log.info("[ext] Component extension initialized"),t={},e.sandbox.startComponents=function(e,n){return t=r.startAll(e,n)},e.sandbox.getInitializedComponents=function(){return t.all},e.sandbox.getLastestInitializedComponents=function(){return t["new"]}},afterAppStarted:function(e,t){var n;return o.log.info("Calling startComponents from afterAppStarted"),n=e?e:null,t.sandbox.startComponents(n,t)},name:"Component Extension",classes:r,optionKey:"components"}})},{"./../base.coffee":"/home/ariel/code/pestle/src/base.coffee","./../util/module.coffee":"/home/ariel/code/pestle/src/util/module.coffee",jquery:"jquery"}],"/home/ariel/code/pestle/src/extension/responsivedesign.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i,o;return i=e("./../base.coffee"),o=function(){function e(e){null==e&&(e={}),i.util.bindAll(this,"_init","detectDevice","_checkViewport","_attachWindowHandlers","getDevice","_resizeHandler"),this.config=i.util.extend({},this.cfg,e),this._init()}return e.prototype.cfg={waitLimit:300,windowResizeEvent:!0,breakpoints:[{name:"mobile",bpmin:0,bpmax:767},{name:"tablet",bpmin:768,bpmax:959},{name:"desktop",bpmin:960}]},e.prototype._init=function(){return this.config.windowResizeEvent&&this._attachWindowHandlers(),this.detectDevice()},e.prototype._attachWindowHandlers=function(){var e;return e=i.util.debounce(this._resizeHandler,this.config.waitLimit),$(window).resize(e)},e.prototype._resizeHandler=function(){return Pestle.emit("rwd:windowresize"),this.detectDevice()},e.prototype.detectDevice=function(){var e,t,n,o,r,s,a,c;return t=this.config.breakpoints,a=i.vp.viewportW(),c=this._checkViewport(a,t),i.util.isEmpty(c)?(r="[ext] The passed settings to the Responsive Design Extension might not be correct since we haven't been able to detect an asociated breakpoint to the current viewport",i.log.warn(r)):(n=i.util.string.capitalize(c.name),i.util.isFunction(i.device["is"+n])&&(e=i.device["is"+n]),s=!1,i.util.isFunction(e)&&(s=e()),s||c.name?(o="rwd:"+c.name.toLowerCase(),i.log.info("[ext] Responsive Design extension is triggering the following"),i.log.info(o),Pestle.emit(o),this.device=c.name.toLowerCase()):void 0)},e.prototype.getDevice=function(){return this.device},e.prototype._checkViewport=function(e,t){var n;return n=i.util.filter(t,function(t){return e>=t.bpmin?t.bpmax&&0!==t.bpmax?e<=t.bpmax?!0:!1:!0:!1}),n.length>0?n.shift():{}},e}(),{initialize:function(e){var t,n;return i.log.info("[ext] Responsive Design Extension initialized"),t={},e.config.extension&&e.config.extension[this.optionKey]&&(t=i.util.defaults({},e.config.extension[this.optionKey])),n=new o(t),e.sandbox.rwd=function(){return n.detectDevice()},e.sandbox.rwd.getDevice=function(){return n.getDevice()}},afterAppInitialized:function(e){return i.log.info("afterAppInitialized method from ResponsiveDesign"),e.sandbox.rwd()},name:"Responsive Design Extension",optionKey:"responsivedesign"}})},{"./../base.coffee":"/home/ariel/code/pestle/src/base.coffee"}],"/home/ariel/code/pestle/src/extension/responsiveimages.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i,o;return i=e("./../base.coffee"),o=function(){function e(e){null==e&&(e={}),i.util.bindAll(this,"_init","_createListeners","_createInstance"),this.config=i.util.extend({},this.cfg,e),this._init()}return e.prototype.cfg={availableWidths:[133,152,162,225,210,224,280,352,470,536,590,676,710,768,885,945,1190],availablePixelRatios:[1,2,3],defaultSelector:".delayed-image-load",lazymode:!0},e.prototype._init=function(){return this.config.lazymode&&this._createListeners(),this._createInstance()},e.prototype._createListeners=function(){return Pestle.on("responsiveimages:create",this._createInstance)},e.prototype._createInstance=function(e){var t,n;return null==e&&(e={}),i.log.info("[ext] Responsive Images Extension creating a new Imager instance"),n=e.selector||this.config.defaultSelector,t=i.util.isEmpty(e)?this.config:e,new i.Imager(n,t)},e}(),{initialize:function(e){var t;return i.log.info("[ext] Responsive Images Extension initialized"),t={},e.config.extension&&e.config.extension[this.optionKey]&&(t=i.util.defaults({},e.config.extension[this.optionKey])),e.sandbox.responsiveimages=function(){var e;return e=new o(t),Pestle.emit("responsiveimages:initialized")}},afterAppInitialized:function(e){return i.log.info("afterAppInitialized method from ResponsiveImages"),e.sandbox.responsiveimages()},name:"Responsive Images Extension",optionKey:"responsiveimages"}})},{"./../base.coffee":"/home/ariel/code/pestle/src/base.coffee"}],"/home/ariel/code/pestle/src/util/cookies.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i;return i=e("cookies-js"),n={set:function(e,t,n){return i.set(e,t,n)},get:function(e){return i.get(e)},expire:function(e,t){return i.expire(e,t)}}})},{"cookies-js":"/home/ariel/code/pestle/node_modules/cookies-js/dist/cookies.js"}],"/home/ariel/code/pestle/src/util/devicedetection.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i;return i=e("ismobilejs"),n={isMobile:function(){return i.phone},isTablet:function(){return i.tablet},isIphone:function(){return i.apple.phone},isIpod:function(){return i.apple.ipod},isIpad:function(){return i.apple.tablet},isApple:function(){return i.apple.device},isAndroidPhone:function(){return i.android.phone},isAndroidTablet:function(){return i.android.tablet},isAndroidDevice:function(){return i.android.device},isWindowsPhone:function(){return i.windows.phone},isWindowsTablet:function(){return i.windows.tablet},isWindowsDevice:function(){return i.windows.device}}})},{ismobilejs:"/home/ariel/code/pestle/node_modules/ismobilejs/isMobile.js"}],"/home/ariel/code/pestle/src/util/eventbus.coffee":[function(e,t,n){var i=function(e,t){function n(){this.constructor=e}for(var i in t)o.call(t,i)&&(e[i]=t[i]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},o={}.hasOwnProperty;!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var o;return o=e("wolfy87-eventemitter"),n=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return i(t,e),t}(o)})},{"wolfy87-eventemitter":"/home/ariel/code/pestle/node_modules/wolfy87-eventemitter/EventEmitter.js"}],"/home/ariel/code/pestle/src/util/extmanager.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i;return i=e("../base.coffee"),n=function(){function e(){this._extensions=[],this._initializedExtensions=[]}return e.prototype._extensionConfigDefaults={activated:!0},e.prototype.add=function(e){var t;return e.name||(t="The extension doesn't have a name associated. It will be hepfull if you have assing all of your extensions a name for better debugging",i.log.warn(t)),i.util.each(this._extensions,function(t,n){if(i.util.isEqual(t,e))throw new Error("Extension: "+e.name+" already exists.")}),this._extensions.push(e)},e.prototype.init=function(e){var t;return t=i.util.clone(this._extensions),i.log.info("Added extensions (still not initialized):"),i.log.debug(t),this._initExtension(this._extensions,e),i.log.info("Initialized extensions:"),i.log.debug(this._initializedExtensions)},e.prototype._initExtension=function(e,t){var n;return e.length>0?(n=e.shift(),this._isExtensionAllowedToBeActivated(n,t.config)?(n.activated=!0,n.initialize(t),this._initializedExtensions.push(n)):n.activated=!1,this._initExtension(e,t)):void 0},e.prototype._isExtensionAllowedToBeActivated=function(e,t){var n,o;if(!e.optionKey)throw o="The optionKey is required and was not defined by: "+e.name,i.log.error(o),new Error(o);return n=t.extension&&t.extension[e.optionKey]&&t.extension[e.optionKey].hasOwnProperty("activated")?t.extension[e.optionKey].activated:this._extensionConfigDefaults.activated},e.prototype.getInitializedExtensions=function(){return this._initializedExtensions},e.prototype.getInitializedExtensionByName=function(e){return i.util.where(this._initializedExtensions,{optionKey:e})},e.prototype.getExtensions=function(){return this._extensions},e.prototype.getExtensionByName=function(e){return i.util.where(this._extensions,{optionKey:e})},e}()})},{"../base.coffee":"/home/ariel/code/pestle/src/base.coffee"}],"/home/ariel/code/pestle/src/util/general.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i;return i={isFunction:e("lodash/isFunction"),isObject:e("lodash/isObject"),isEmpty:e("lodash/isEmpty"),isEqual:e("lodash/isEqual"),isArray:e("lodash/isArray"),isString:e("lodash/isString"),includes:e("lodash/includes"),extend:e("lodash/extend"),keys:e("lodash/keys"),clone:e("lodash/clone"),defaults:e("lodash/defaults"),map:e("lodash/map"),each:e("lodash/each"),bindAll:e("lodash/bindAll"),debounce:e("lodash/debounce"),capitalize:e("lodash/capitalize"),filter:e("lodash/filter"),where:e("lodash/filter"),has:e("lodash/has"),result:e("lodash/result")},n={versionCompare:function(e,t,n){var i,o,r,s,a,c;if(o=function(e){return(r?/^\d+[A-Za-z]*$/:/^\d+$/).test(e)},r=n&&n.lexicographical,c=n&&n.zeroExtend,s=e.split("."),a=t.split("."),!s.every(o)||!a.every(o))return NaN;if(c){for(;s.length<a.length;)s.push("0");for(;a.length<s.length;)a.push("0")}for(r||(s=s.map(Number),a=a.map(Number)),i=-1;i<s.length;){if(i++,a.length<i)return 1;if(s[i]!==a[i]){if(s[i]>a[i])return 1;if(a[i]>s[i])return-1}}return s.length!==a.length?-1:0},string:{capitalize:function(e){return e=null==e?"":String(e),e.charAt(0).toUpperCase()+e.slice(1)}}},i.extend(n,i),n})},{"lodash/bindAll":"lodash/bindAll","lodash/capitalize":"lodash/capitalize","lodash/clone":"lodash/clone","lodash/debounce":"lodash/debounce","lodash/defaults":"lodash/defaults","lodash/each":"lodash/each","lodash/extend":"lodash/extend","lodash/filter":"lodash/filter","lodash/has":"lodash/has","lodash/includes":"lodash/includes","lodash/isArray":"lodash/isArray","lodash/isEmpty":"lodash/isEmpty","lodash/isEqual":"lodash/isEqual","lodash/isFunction":"lodash/isFunction","lodash/isObject":"lodash/isObject","lodash/isString":"lodash/isString","lodash/keys":"lodash/keys","lodash/map":"lodash/map","lodash/result":"lodash/result"}],"/home/ariel/code/pestle/src/util/logger.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i,o;return i=e("loglevel"),o=e("./sentry.coffee"),n={setLevel:function(e){return i.setLevel(e)},setConfig:function(e){return i.setLevel(e.logLevel),e.sentry?o.initialize(e.sentry):void 0},trace:function(e){return i.trace(e)},debug:function(e){return i.debug(e)},info:function(e){return i.info(e)},warn:function(e){return i.warn(e)},error:function(e){return i.error(e),o.sendMessage(e)}}})},{"./sentry.coffee":"/home/ariel/code/pestle/src/util/sentry.coffee",loglevel:"/home/ariel/code/pestle/node_modules/loglevel/lib/loglevel.js"}],"/home/ariel/code/pestle/src/util/module.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i,o,r,s;return o=e("../base.coffee"),i=e("jquery"),n=function(){function e(e){this.sandbox=e.sandbox,this.options=e.options,this.setElement()}return e}(),r=function(){function e(){}return e.list={},e.add=function(e,t){return this.extend(e,t,n)},e.get=function(e){return o.util.isString(e)&&this.list[e]?this.list[e]:void 0},e.extend=function(e,t,i){var r,a,c,l;if(o.util.isString(e)&&o.util.isObject(t)){if(i)if(o.util.isString(i)){if(r=this.list[i],!r)throw l="[Module/ "+e(NaN+i+"] which does not exist"),o.log.error(l),new Error(l);i=r}else o.util.isFunction(i)&&(i=i);else i=n;return a=s.call(i,t),o.util.has(this.list,e)?(l="[Component:"+e+"] have already been defined",o.log.warn(l),this):(c=s.call(i,t),this.list[e]=c,c)}},e}(),o.util.extend(n.prototype,o.Events,{initialize:function(){var e;return e="[Component/"+this.options.name+"]:Doesn't have an initialize method defined",o.log.warn(e)},setElement:function(){return this.undelegateEvents(),this.el=this.options.el,this.$el=i(this.el),this.delegateEvents()},delegateEvents:function(e){var t,n,i,r;if(t=/^(\S+)\s*(.*)$/,e||(e=o.util.result(this,"events"))){this.undelegateEvents();for(n in e)r=e[n],o.util.isFunction(r)||(r=this[e[n]]),r&&(i=n.match(t),this.delegate(i[1],i[2],o.util.bind(r,this)));return this}},delegate:function(e,t,n){return this.$el.on(e+".pestleEvent"+this.options.guid,t,n),this},undelegateEvents:function(){return this.$el&&this.$el.off(".pestleEvent"+this.options.guid),this},stop:function(){return this.undelegateEvents(),this.$el?this.$el.remove():void 0}}),s=function(e,t){var n,i,r;return r=this,i=e&&o.util.has(e,"constructor")?e.constructor:function(){return r.apply(this,arguments)},o.util.extend(i,r,t),n=function(){this.constructor=i},n.prototype=r.prototype,i.prototype=new n,e&&o.util.extend(i.prototype,e),i.prototype._super_=r.prototype.initialize,i},r.Module=n,r})},{"../base.coffee":"/home/ariel/code/pestle/src/base.coffee",jquery:"jquery"}],"/home/ariel/code/pestle/src/util/sentry.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i;return i=e("raven-js"),n={initialize:function(e){return i.config(e.endPoint,e.options),i.install()},sendMessage:function(e){return i.isSetup()?i.captureMessage(e):void 0}}})},{"raven-js":"/home/ariel/code/pestle/node_modules/raven-js/dist/raven.js"}],"/home/ariel/code/pestle/src/util/viewportdetection.coffee":[function(e,t,n){!function(e,n){return t.exports=n(e,{})}(window,function(t,n){var i;return i=e("verge"),n={viewportW:function(){return i.viewportW()},viewportH:function(e){return i.viewportH()},viewport:function(e){return i.viewport()},inViewport:function(e,t){return i.inViewport(e,t)},inX:function(e,t){return i.inX(e,t)},inY:function(e,t){return i.inY(e,t)},scrollX:function(){return i.scrollX()},scrollY:function(){return i.scrollY()},mq:function(e){return i.mq(e)},rectangle:function(e,t){return i.rectangle(e,t)},aspect:function(e){return i.aspect(e)}}})},{verge:"/home/ariel/code/pestle/node_modules/verge/verge.js"}]},{},["./src/core.coffee"])("./src/core.coffee")});